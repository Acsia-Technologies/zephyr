/*
 * Created by Albert P Joshi

	Required target SOC was PS32K144HFT0VLLT
	But wasnt declared in the HAL
	According to datasheet the following were assumed to be compatible

	Compatible  by datasheet -> xS32k144H(F/A)xxLLx
	Hence chose FS32K144HAT0MLLT which closely resembles the required target SOC

 */

/dts-v1/;
#include <zephyr/dt-bindings/gpio/gpio.h>
#include <zephyr/dt-bindings/pwm/pwm.h>
#include <zephyr/dt-bindings/input/input-event-codes.h>
#include <arm/nxp/nxp_s32k144.dtsi>
#include "s32k144_q100_eval-pinctrl.dtsi"

/ {
	model = "NXP S32K144_Q100_eval";
	compatible = "nxp,s32k144_q100_eval";

	chosen {
		zephyr,sram = &sraml;
		zephyr,flash = &flash0;
		zephyr,console = &lpuart0;
		zephyr,shell-uart = &lpuart0;
		zephyr,uart-mcumgr = &lpuart0;
		zephyr,uart-pipe = &lpuart0;
		//zephyr,display = &lpi2c0;
		//zephyr,canbus = &flexcan0;
		zephyr,flash-controller = &ftfc;
		zephyr,code-partition = &slot0_partition;
		//zephyr,io_channels = &adc0;
		inc,uart = &lpuart1;
		dlt,uart = &lpuart0;
	};


	aliases {
		led0 = &led1_red;
		led1 = &led1_green;
		led2 = &led1_blue;
		sw0 = &button_3;
		i2c-0 = &lpi2c0;
		pwm-led0 = &pwm_led0;
		mcuboot-led0 = &led1_blue;
		mcuboot-button0 = &button_3;
	};

	leds {
		compatible = "gpio-leds";

		led1_red: led_0 {
			gpios = <&gpiod 15 GPIO_ACTIVE_LOW>;
			label = "LED1_RGB_RED";
		};
		led1_green: led_1 {
			gpios = <&gpiod 16 GPIO_ACTIVE_LOW>;
			label = "LED1_RGB_GREEN";
		};
		led1_blue: led_2 {
			gpios = <&gpiod 0 GPIO_ACTIVE_LOW>;
			label = "LED1_RGB_BLUE";
		};
	};

	pwmleds {
		compatible = "pwm-leds";
		pwm_led0: pwm_led_0 {
			pwms = <&ftm0 0 PWM_MSEC(20) PWM_POLARITY_INVERTED>;
		};
	};

	gpio_keys {
		compatible = "gpio-keys";

		button_3: button_0 {
			label = "SW3";
			gpios = <&gpioc 13 GPIO_ACTIVE_HIGH>;
			zephyr,code = <INPUT_KEY_0>;
		};
		button_2: button_1 {
			label = "SW2";
			gpios = <&gpioc 12 GPIO_ACTIVE_HIGH>;
			zephyr,code = <INPUT_KEY_0>;
		};
	};

};

&gpioa {
	status = "okay";
};

&gpiob {
	status = "okay";
};

&gpioc {
	status = "okay";
};

&gpiod {
	status = "okay";
};

&gpioe {
	status = "okay";
};

&lpuart0 {
	pinctrl-0 = <&lpuart0_default>;
	pinctrl-names = "default";
	current-speed = <115200>;
	status = "okay";
};


&lpuart1 {
	pinctrl-0 = <&lpuart1_default>;
	pinctrl-names = "default";
	current-speed = <115200>;
	status = "okay";
	// Do not Enable DMA Driver not implemented.
	// dmas = <&edma0 1>,<&edma0 2>;
	// dma-names="tx","rx";
};


&lpspi0 {
	pinctrl-0 = <&lpspi0_default>;
	pinctrl-names = "default";
	status = "okay";
};

&ftm0 {
	compatible = "nxp,kinetis-ftm-pwm";
	pinctrl-0 = <&ftm0_default>;
	pinctrl-names = "default";
	clock-source = "system";
	prescaler = <128>;
	#pwm-cells = <3>;
	status = "okay";
};

/* &flexcan0 {
	pinctrl-0 = <&flexcan0_default>;
	pinctrl-names = "default";
	// phys = <&can_phy0>;
	bus-speed = <125000>;
	sample-point = <875>;
	bus-speed-data = <1000000>;
	sample-point-data = <875>;
	status = "okay";
}; */

&flash0 {

	partitions {
		compatible = "fixed-partitions";
		#address-cells = <0x1>;
		#size-cells = <0x1>;

		boot_partition: partition@00000000{
			label = "mcuboot";
			reg = <0x00000000 0x10000>;
			read-only;
		};

		slot0_partition: partition@10000 {
			label = "image-0";
			reg = <0x10000 0x38000>;
		};
		slot1_partition: partition@48000 {
			label = "image-1";
			reg = <0x48000 0x38000>;
		};
	};
};

&adc0 {
	status = "okay";
};

&adc1 {
	status = "okay";
};